# ============================
# APPLICATION
# ============================
spring.application.name=API-GATEWAY
server.port=8080

# ============================
# JWT SECURITY
# ============================
jwt.secretKey=JWT_SECRET_KEY:fewfbewufh@euofew&&&*jnkjfnekjw#fbhjewbfhewfbhj98989@@


# ============================
# EUREKA CLIENT
# ============================



# ============================
# EUREKA INSTANCE
# ============================
#eureka.instance.instance-id=${spring.application.name}:${server.port}
#eureka.instance.appname=${spring.application.name}
#eureka.instance.prefer-ip-address=true
#eureka.instance.hostname=api-gateway

eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

# ============================
# SPRING CLOUD GATEWAY - ROUTES
# ============================
spring.cloud.gateway.routes[0].id=USER-SERVICE
spring.cloud.gateway.routes[0].uri=lb://USER-SERVICE
spring.cloud.gateway.routes[0].predicates[0]=Path=/auth/**

spring.cloud.gateway.routes[1].id=PRODUCT-SERVICE
spring.cloud.gateway.routes[1].uri=lb://PRODUCT-SERVICE
spring.cloud.gateway.routes[1].predicates[0]=Path=/Product/**

spring.cloud.gateway.routes[2].id=OTP-SERVICE
spring.cloud.gateway.routes[2].uri=lb://OTP-SERVICE
spring.cloud.gateway.routes[2].predicates[0]=Path=/OTP/**

spring.cloud.gateway.routes[3].id=ORDER-SERVICE
spring.cloud.gateway.routes[3].uri=lb://ORDER-SERVICE
spring.cloud.gateway.routes[3].predicates[0]=Path=/Order/**

spring.cloud.gateway.routes[4].id=PAYMENT-SERVICE
spring.cloud.gateway.routes[4].uri=lb://PAYMENT-SERVICE
spring.cloud.gateway.routes[4].predicates[0]=Path=/payment/**

spring.cloud.gateway.routes[5].id=CART-SERVICE
spring.cloud.gateway.routes[5].uri=lb://CART-SERVICE
spring.cloud.gateway.routes[5].predicates[0]=Path=/Cart/**







# ============================
# SPRING CLOUD GATEWAY - GLOBAL CORS
# ============================
spring.cloud.gateway.globalcors.add-to-simple-url-handler-mapping=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origin-patterns=http://localhost:5173
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*,Authorization
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].exposed-headers=Set-Cookie,Authorization


# ============================
# LOAD BALANCER
# ============================
spring.cloud.loadbalancer.ribbon.enabled=true
spring.cloud.loadbalancer.cache.enabled=true

# ============================
# MANAGEMENT ENDPOINTS
# ============================
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.endpoint.gateway.enabled=true
management.endpoint.routes.enabled=true

# ============================
# LOGGING (For Debugging)
# ============================
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.cloud.loadbalancer=DEBUG
logging.level.org.springframework.cloud.netflix.eureka=DEBUG
logging.level.com.netflix.discovery=DEBUG
logging.level.reactor.netty.http.client=DEBUG
logging.level.org.springframework.web=DEBUG
